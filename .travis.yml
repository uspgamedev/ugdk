language: generic
dist: trusty
sudo: false

compiler:
  - gcc
  - clang

matrix:
  include:
  - os: linux
    env: COMPILER_NAME=gcc CXX=g++-5 CC=gcc-5
    addons:
    apt:
      packages:
      - g++-5
    sources: &sources
    - llvm-toolchain-precise-3.8
    - ubuntu-toolchain-r-test
  - os: linux
    env: COMPILER_NAME=clang CXX=clang++-3.8 CC=clang-3.8
    addons:
      apt:
        packages:
          - clang-3.8
        sources: *sources

addons:
  apt:
    packages:
      - cmake
      - libsdl2-dev
      - libsdl2-mixer-dev
      - libgl1-mesa-dev
      - libglu1-mesa-dev
      - libpng-dev 

script:
  - cmake .
  - make libugdk
  - make ugdk_test
  - ./test/ugdk_test

notifications:
  email:
    - travis@uspgamedev.org
